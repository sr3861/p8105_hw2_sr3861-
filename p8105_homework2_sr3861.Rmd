---
title: "P8105 Homework 2"
output: github_document
author: Shritama Ray
date: 10/5/2022
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```
## Problem 1: NYC Transit Data

Read & Clean the Dataset
```{r read and clean}
transit_df = read_csv("./Data/subway_data.csv") %>%
  janitor::clean_names() %>%
  select(line:entry, vending, ada)%>%
  mutate(entry = recode(entry, YES = TRUE, NO = FALSE)) 

head(transit_df, 10)
```

**Summary:**
This dataset contains information on the NYC subway system. Specifically, the dataset describes the routes and locations of the stations, along with some other features such as ADA accessibility, vending machines, and entrance type. So far I've manipulated the data to create clean variable names, remove the variables I am not interested in, and convert the entry values to logical operators. The resulting dataset has **1868 rows** and **19 columns.** The data is **NOT tidy.** The route variables are in a wide format, resulting in many NA values. 

**Questions:**

1. How many distinct stations are there?
```{r distinct stations}
nrow(distinct(transit_df, line, station_name))
```
There are **465** distinct stations.

2. How many stations are ADA compliant?
```{r ada compliant}
distinct(transit_df, line, station_name, ada) %>%
  filter(ada == TRUE) %>%
  nrow()
```
**84** stations are ADA compliant

3. What proportion of station entrances/exits without vending allow entrance?
```{r no vending, allow entrance}
filter(transit_df, vending == "NO" & entry == TRUE) %>%
  nrow()

filter(transit_df, vending == "NO") %>%
  nrow()
```
**69/183** of the entrances/exits without vending allow entry

Reformat the data so that route number and route name are distinct variables:
```{r reformat long}
  transit_tidy = 
  mutate_at(transit_df, c('route8','route9','route10','route11'), as.character) %>%
  pivot_longer(route1:route11, 
               names_to = "route_number", 
               names_prefix = "route", 
               values_to = "route_name")
```

How many distinct stations serve the A train?
```{r distinct stations A train}
nrow(
  filter(
    distinct(transit_tidy, line, station_name, route_name),route_name == "A"))
```
**60** distinct stations serve the A train.

Of the stations, that serve the A train, how many are ADA complaint?
```{r ada compliant A train}
nrow(
  filter(
    distinct(transit_tidy, line, station_name, route_name, ada),
    route_name == "A" & ada == TRUE))
```
**17** of the stations that serve the A train are ADA compliant. 

##Problem 2: Mr. Trash Wheel 

Read and clean the dataset:
```{r read and clean trash_wheel}
library(readxl)
trash_wheel = read_excel("./Data/trash_wheel.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N549") %>%
  janitor::clean_names() %>%
   filter(dumpster != '') %>%
   mutate(sports_balls = as.integer(sports_balls))
```
